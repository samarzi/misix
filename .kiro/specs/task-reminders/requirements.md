# Requirements Document - Task Reminders

## Introduction

Реализация системы напоминаний для задач в MISIX. Пользователи должны получать уведомления в Telegram о задачах с дедлайнами. Система использует background scheduler для проверки задач и отправки напоминаний.

## Glossary

- **ReminderService**: Сервис для управления напоминаниями
- **TaskScheduler**: Background процесс для проверки задач
- **APScheduler**: Библиотека для планирования задач
- **TelegramNotifier**: Компонент для отправки уведомлений в Telegram

## Requirements

### Requirement 1: Автоматические напоминания

**User Story:** Как пользователь, я хочу получать напоминания о задачах с дедлайнами, чтобы не забывать важные дела

#### Acceptance Criteria

1. WHEN задача создана с дедлайном, THE System SHALL автоматически запланировать напоминание
2. THE System SHALL отправлять напоминание за 1 час до дедлайна
3. THE System SHALL отправлять напоминание в момент дедлайна
4. WHEN напоминание отправлено, THE System SHALL залогировать отправку
5. THE System SHALL отправлять напоминания только для активных задач

### Requirement 2: Ежедневная сводка

**User Story:** Как пользователь, я хочу получать утреннюю сводку задач на день, чтобы планировать свой день

#### Acceptance Criteria

1. THE System SHALL отправлять ежедневную сводку в 9:00 утра
2. THE Svodka SHALL включать задачи на сегодня
3. THE Svodka SHALL включать просроченные задачи
4. THE Svodka SHALL включать статистику (выполнено вчера)
5. IF у пользователя нет задач, THEN THE System SHALL не отправлять сводку

### Requirement 3: Настройка напоминаний

**User Story:** Как пользователь, я хочу настраивать время напоминаний, чтобы получать их в удобное время

#### Acceptance Criteria

1. THE System SHALL поддерживать команду /reminders для настройки
2. THE User SHALL иметь возможность включить/выключить напоминания
3. THE User SHALL иметь возможность изменить время утренней сводки
4. THE User SHALL иметь возможность выбрать за сколько минут напоминать (15/30/60)
5. THE System SHALL сохранять настройки в профиле пользователя

### Requirement 4: Форматирование уведомлений

**User Story:** Как пользователь, я хочу получать понятные и информативные уведомления

#### Acceptance Criteria

1. THE Notification SHALL включать название задачи
2. THE Notification SHALL включать время дедлайна
3. THE Notification SHALL включать приоритет задачи
4. THE Notification SHALL использовать эмодзи для наглядности
5. THE Notification SHALL включать кнопки быстрых действий (выполнено/отложить)

### Requirement 5: Надежность и производительность

**User Story:** Как разработчик, я хочу чтобы система напоминаний работала надежно

#### Acceptance Criteria

1. THE Scheduler SHALL проверять задачи каждые 5 минут
2. THE System SHALL обрабатывать ошибки отправки уведомлений
3. IF отправка не удалась, THEN THE System SHALL повторить через 1 минуту
4. THE System SHALL логировать все отправленные напоминания
5. THE Scheduler SHALL автоматически перезапускаться при сбое
